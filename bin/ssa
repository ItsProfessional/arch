#!/bin/sh

OUT="${HOME}/.ss"

mkdir -p "${OUT}"

if [ "$(basename ${0})" == "sss" ]; then
	SEL="true"
elif [ "$(basename ${0})" == "ssm" ]; then 
	MON="true"
fi

if [ -n "${WAYLAND_DISPLAY}" ]; then
	if [ "${SEL}" == "true" ]; then
		grim -g "$(slurp)" "${OUT}/$(date +%Y%m%d_%H%M%S).png"
	elif [ "${MON}" == "true" ]; then
		grim -g "$(slurp -o)" "${OUT}/$(date +%Y%m%d_%H%M%S).png"
	else
		grim "${OUT}/$(date +%Y%m%d_%H%M%S).png"
	fi
elif [ -n "${DISPLAY}" ]; then
	if [ "${SEL}" == "true" ]; then
		scrot -s "${OUT}/%Y%m%d_%H%M%S.\$wx\$h.png"
	else
		scrot "${OUT}/%Y%m%d_%H%M%S.\$wx\$h.png"
	fi
fi

