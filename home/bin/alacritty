#!/bin/zsh

base="${HOME}/.config/alacritty"

if [ "${1}" = "--theme" -o "${1}" = "-t" ]; then
	theme="${2}"
	shift
	shift
else
	themes=()
	for f in "${base}/themes/"*yml; do
		themes+=${$(basename "${f}")/.yml/}
	done
	theme="${themes[$(( ( $RANDOM % ${#themes} ) + 1 ))]}"
fi

cfg="/tmp/alacritty.${theme}.yml"

cat "${base}/alacritty.yml" "${base}/themes/${theme}.yml" \
	> "${cfg}"

ALACRITTY_theme="${theme}" \
	/usr/bin/alacritty \
	--config-file="${cfg}" \
	--no-live-config-reload \
	"$@" \
	&

